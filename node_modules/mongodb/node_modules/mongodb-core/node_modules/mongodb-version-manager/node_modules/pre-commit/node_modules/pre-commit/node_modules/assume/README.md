# assume

[![From bigpipe.io][from]](http://bigpipe.io)[![Version npm][version]](http://browsenpm.org/package/assume)[![Build Status][build]](https://travis-ci.org/bigpipe/assume)[![Dependencies][david]](https://david-dm.org/bigpipe/assume)[![Coverage Status][cover]](https://coveralls.io/r/bigpipe/assume?branch=master)

[from]: https://img.shields.io/badge/from-bigpipe.io-9d8dff.svg?style=flat-square
[version]: http://img.shields.io/npm/v/assume.svg?style=flat-square
[build]: http://img.shields.io/travis/bigpipe/assume/master.svg?style=flat-square
[david]: https://img.shields.io/david/bigpipe/assume.svg?style=flat-square
[cover]: http://img.shields.io/coveralls/bigpipe/assume/master.svg?style=flat-square

Assume is an `expect` inspired assertion library who's sole purpose is to create
a working and human readable assert library for browsers and node. The library
is designed to work with different assertion styles.

I've been trying out a lot of libraries over the last couple of years and none
of the assertion libraries that I found "tickled my fancy". They either only
worked in node or had really bad browser support. I wanted something that I can
use starting from Internet Explorer 5 to the latest version while maintaining
the `expect` like API that we all know and love. Writing tests should be dead
simple and not cause any annoyances. This library attempts to achieve all of
this.

## Installation

Assume is written with client and server-side JavaScript in mind and uses the
commonjs module system to export it self. The library is released in the public
npm registry and can be installed using:

```
npm install --save-dev assume
```

The `--save-dev` flag tells `npm` to automatically add this `package.json` and it's
installed version to the `devDependencies` of your module.

As code is written against the commonjs module system we also ship a standalone
version in the module which introduces an `assume` global. The standalone
version can be found in the `dist` folder after installation. The dist file is
not commited to GitHub.

## Table of Contents

- [Installation](#installation)
- [Syntax](#syntax)
- [Configuration](#configuration)
- [Feature Detection](#feature-detection)
- [Performance Testing](#performance-testing)
- [Assertion](#assertion)
  - [Keywords](#keywords)
- [API](#api)
  - [a, an](#a-an)
  - [instanceOf, instanceof, inherits, inherit](#instanceof-instanceof-inherits-inherit)
  - [include, includes, contain, contains](#include-includes-contain-contains)
  - [ok, okay, truthy, truely](#ok-okay-truthy-truely)
  - [falsely, falsey](#falsely-falsey)
  - [true](#true)
  - [false](#false)
  - [exists, exist](#exists-exist)
  - [length, lengthOf, size](#length-lengthof-size)
  - [empty](#empty)
  - [above, gt, greater, greaterThan](#above-gt-greater-greaterthan)
  - [least, gte, atleast](#least-gte-atleast)
  - [below, lt, less, lessThan](#below-lt-less-lessthan)
  - [most, lte, atmost](#most-lte-atmost)
  - [within, between](#within-between)
  - [hasOwn, own, ownProperty, haveOwnProperty, property, owns, hasown](#hasown-own-ownproperty-haveownproperty-property-owns-hasown)
  - [match, matches](#match-matches)
  - [equal, equals, eq, eqs, exactly](#equal-equals-eq-eqs-exactly)
  - [eql, eqls](#eql-eqls)
  - [either](#either)
  - [throw, throws, fail, fails](#throw-throws-fail-fails)
  - [finite, isFinite, finiteness](#finite-isfinite-finiteness)
  - [generator](#generator)
  - [optimisation, optimization](#optimisation-optimization)
  - [optimised, optimized](#optimised-optimized)
  - [start, starts, startsWith, startWith](#start-stats-startswith-startwith)
  - [end, ends, endsWith, endWith](#end-ends-endswith-endwith)
  - [closeTo, close, approximately, near](#closeto-close-approximately-near)
- [i.hope](#ihope)
- [Planning](#planning)
- [Waiting](#waiting)
- [Plugins](#plugins)
  - [Publishing](#publishing)
  - [use](#use)
  - [add](#add)
  - [test](#test)
  - [assign](#assign)
  - [clone](#clone)

## Syntax

We support a lot of different syntaxes and assertion styles. The only thing we
will no (read never) support is the `should` syntax as we will never extend
build-in objects/primitives of JavaScript.

The default syntax that we support is modeled after `expect` so you can replace
any assertion library which implements this API by simply changing the require
to:

```js
var expect = require('assume');

expect('foo').equals('foo');
expect('foo').is.a('string');
```

As you can see in the example above the `is` property is used to make the
assertion more readable. We support the following aliases which allow these kind
of chains:

- `to`
- `be`
- `been`
- `is`
- `and`
- `has`
- `with`
- `that`
- `at`
- `of`
- `some`
- `does`
- `itself`
- `which`

So you can just write:

```js
assume(100).is.at.most(100);
```

But do note that these aliases are **optionally** so the above example can also
be written as:

```js
assume(100).most(1000);
```

### Configuration

The module can be configured globally be changing the properties on the `config`
object:

```js
var assume = require('assume');
assume.config.includeStack = false;
```

Or locally for each assertions by supplying the `assume` function with an
optional configuration object:

```js
assume('foo', { includeStack: false }).is.a('buffer');
```

The following options can be configured:

- **`includeStack`** Should we output a stack trace. Defaults to `true`.
- **`showDIff`** Show difference between the given and expected values. Defaults
  to `true`.

### Feature Detection

Certain assertions only work in certain JavaScript/EcmaScript environments.
Things like the `generator` assertions only work in ES6 as the `function *` is
invalid syntax. The results of the feature detection is publicly stored in the
`assume.supports` object. You can use this object to add some conditional tests
to your test suite. The following features are currently detected:

- **generators** Are generators supported in the host environment.
- **native** Is V8 native syntax supported.

```js
if (assume.supports.native) {
  it('does things', function () {
    ..
  });
}
```

If you are a plugin author, feel free to add your own feature detections to this
object (as long as you do not override any pre-existing values).

### Performance Testing

The performance testing is only available for environments that use V8 and more
specifically the `--allow-natives-syntax` flags. These flags can be supplied in
[chrome before you start browser][flags]. These flags are necessary to get
access to the V8 internals which expose optimization and de-optimization
information.

If you are running `iojs` or `node` on the server, you can pass in these flags
directly:

```
iojs --allow-natives-syntax
```

#### Mocha

If you are using `mocha` as test runner you usually add `mocha` as executable.
But unfortunately, the `mocha` binary doesn't allow you to pass V8 flags. So
instead of using the `mocha` binary directly you can use the `node` and call the
`_mocha` binary instead:

```
node --allow-natives-syntax --harmony ./node_modules/mocha/bin/_mocha test/test.js
```

You can check if your host environment supports these performance tests by
checking the `assume.supports.native` variable.

### Assertion

There are various of assertions available in assume. If you want the failed
assertion to include a custom message or reason you can **always** add this as last
argument of the assertion function.

```js
assume(true).is.false('how odd, true is not a false');
```

The behaviours of the assertions can be chained using special "flags" or
"prefixes". We currently support the following prefixes.

- `.not`, `.doesnt`, `.dont` Instead of assu