/*!
 * Matcha - BDD Interface
 * Copyright(c) 2012 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */

/*!
 * Internal Dependancies
 */

var Suite = require('../suite')
  , Bench = require('../bench');

/*!
 * Primary Export
 */

module.exports = function (interface) {
  var suite = interface.suite
    , suites = [ suite ];

  /*!
   * Listen for pre-requires to a specific file.
   */

  suite.on('pre-require', function () {

    /**
     * ### suite (fn)
     *
     * Define a new suite. Note that suites
     * can not be nested. A suite can contain
     * have it's options `set` as well as
     * infinitely defined benches.
     *
     * @param {Function} suite definition
     * @api public
     * @name suite
     */

    function suiteMount (title, fn) {
      var suite = Suite.create(suites[0], title);
      suites.unshift(suite);
      interface.unmount('suite');
      fn();
      suites.shift(suite);
      interface.mount('suite', suiteMount);
    }

    interface.mount('suite', suiteMount);

    